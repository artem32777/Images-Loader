(()=>{"use strict";const e={};let t={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()}};function s(){if(location.hash)return location.hash.replace("#","")}let n=!0,o=(e=500)=>{let t=document.querySelector("body");if(n){let s=document.querySelectorAll("[data-lp]");setTimeout((()=>{for(let e=0;e<s.length;e++){s[e].style.paddingRight="0px"}t.style.paddingRight="0px",document.documentElement.classList.remove("lock")}),e),n=!1,setTimeout((function(){n=!0}),e)}},i=(e=500)=>{let t=document.querySelector("body");if(n){let s=document.querySelectorAll("[data-lp]");for(let e=0;e<s.length;e++){s[e].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}t.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",document.documentElement.classList.add("lock"),n=!1,setTimeout((function(){n=!0}),e)}};function a(){o(),document.documentElement.classList.remove("menu-open")}function l(e){setTimeout((()=>{window.FLS&&console.log(e)}),0)}e.popup=new class{constructor(e){let t={logging:!1,init:!0,attributeOpenButton:"data-popup",attributeCloseButton:"data-close",fixElementSelector:"[data-lp]",youtubeAttribute:"data-popup-youtube",youtubePlaceAttribute:"data-popup-youtube-place",setAutoplayYoutube:!0,classes:{popup:"popup",popupContent:"popup__content",popupActive:"popup_show",bodyActive:"popup-show"},focusCatch:!0,closeEsc:!0,bodyLock:!0,hashSettings:{location:!1,goHash:!0},on:{beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}}};this.youTubeCode,this.isOpen=!1,this.targetOpen={selector:!1,element:!1},this.previousOpen={selector:!1,element:!1},this.lastClosed={selector:!1,element:!1},this._dataValue=!1,this.hash=!1,this._reopen=!1,this._selectorOpen=!1,this.lastFocusEl=!1,this._focusEl=["a[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"button:not([disabled]):not([aria-hidden])","select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","area[href]","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.options={...t,...e,classes:{...t.classes,...e?.classes},hashSettings:{...t.hashSettings,...e?.hashSettings},on:{...t.on,...e?.on}},this.bodyLock=!1,this.options.init&&this.initPopups()}initPopups(){this.popupLogging("Проснулся"),this.eventsPopup()}eventsPopup(){document.addEventListener("click",function(e){const t=e.target.closest(`[${this.options.attributeOpenButton}]`);if(t)return e.preventDefault(),this._dataValue=t.getAttribute(this.options.attributeOpenButton)?t.getAttribute(this.options.attributeOpenButton):"error",this.youTubeCode=t.getAttribute(this.options.youtubeAttribute)?t.getAttribute(this.options.youtubeAttribute):null,"error"!==this._dataValue?(this.isOpen||(this.lastFocusEl=t),this.targetOpen.selector=`${this._dataValue}`,this._selectorOpen=!0,void this.open()):void this.popupLogging(`Ой ой, не заполнен атрибут у ${t.classList}`);return e.target.closest(`[${this.options.attributeCloseButton}]`)||!e.target.closest(`.${this.options.classes.popupContent}`)&&this.isOpen?(e.preventDefault(),void this.close()):void 0}.bind(this)),document.addEventListener("keydown",function(e){if(this.options.closeEsc&&27==e.which&&"Escape"===e.code&&this.isOpen)return e.preventDefault(),void this.close();this.options.focusCatch&&9==e.which&&this.isOpen&&this._focusCatch(e)}.bind(this)),this.options.hashSettings.goHash&&(window.addEventListener("hashchange",function(){window.location.hash?this._openToHash():this.close(this.targetOpen.selector)}.bind(this)),window.addEventListener("load",function(){window.location.hash&&this._openToHash()}.bind(this)))}open(e){if(n)if(this.bodyLock=!!document.documentElement.classList.contains("lock"),e&&"string"==typeof e&&""!==e.trim()&&(this.targetOpen.selector=e,this._selectorOpen=!0),this.isOpen&&(this._reopen=!0,this.close()),this._selectorOpen||(this.targetOpen.selector=this.lastClosed.selector),this._reopen||(this.previousActiveElement=document.activeElement),this.targetOpen.element=document.querySelector(this.targetOpen.selector),this.targetOpen.element){if(this.youTubeCode){const e=`https://www.youtube.com/embed/${this.youTubeCode}?rel=0&showinfo=0&autoplay=1`,t=document.createElement("iframe");t.setAttribute("allowfullscreen","");const s=this.options.setAutoplayYoutube?"autoplay;":"";if(t.setAttribute("allow",`${s}; encrypted-media`),t.setAttribute("src",e),!this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`)){this.targetOpen.element.querySelector(".popup__text").setAttribute(`${this.options.youtubePlaceAttribute}`,"")}this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`).appendChild(t)}this.options.hashSettings.location&&(this._getHash(),this._setHash()),this.options.on.beforeOpen(this),document.dispatchEvent(new CustomEvent("beforePopupOpen",{detail:{popup:this}})),this.targetOpen.element.classList.add(this.options.classes.popupActive),document.documentElement.classList.add(this.options.classes.bodyActive),this._reopen?this._reopen=!1:!this.bodyLock&&i(),this.targetOpen.element.setAttribute("aria-hidden","false"),this.previousOpen.selector=this.targetOpen.selector,this.previousOpen.element=this.targetOpen.element,this._selectorOpen=!1,this.isOpen=!0,setTimeout((()=>{this._focusTrap()}),50),this.options.on.afterOpen(this),document.dispatchEvent(new CustomEvent("afterPopupOpen",{detail:{popup:this}})),this.popupLogging("Открыл попап")}else this.popupLogging("Ой ой, такого попапа нет.Проверьте корректность ввода. ")}close(e){e&&"string"==typeof e&&""!==e.trim()&&(this.previousOpen.selector=e),this.isOpen&&n&&(this.options.on.beforeClose(this),document.dispatchEvent(new CustomEvent("beforePopupClose",{detail:{popup:this}})),this.youTubeCode&&this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`)&&(this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`).innerHTML=""),this.previousOpen.element.classList.remove(this.options.classes.popupActive),this.previousOpen.element.setAttribute("aria-hidden","true"),this._reopen||(document.documentElement.classList.remove(this.options.classes.bodyActive),!this.bodyLock&&o(),this.isOpen=!1),this._removeHash(),this._selectorOpen&&(this.lastClosed.selector=this.previousOpen.selector,this.lastClosed.element=this.previousOpen.element),this.options.on.afterClose(this),document.dispatchEvent(new CustomEvent("afterPopupClose",{detail:{popup:this}})),setTimeout((()=>{this._focusTrap()}),50),this.popupLogging("Закрыл попап"))}_getHash(){this.options.hashSettings.location&&(this.hash=this.targetOpen.selector.includes("#")?this.targetOpen.selector:this.targetOpen.selector.replace(".","#"))}_openToHash(){let e=document.querySelector(`.${window.location.hash.replace("#","")}`)?`.${window.location.hash.replace("#","")}`:document.querySelector(`${window.location.hash}`)?`${window.location.hash}`:null;(document.querySelector(`[${this.options.attributeOpenButton} = "${e}"]`)?document.querySelector(`[${this.options.attributeOpenButton} = "${e}"]`):document.querySelector(`[${this.options.attributeOpenButton} = "${e.replace(".","#")}"]`))&&e&&this.open(e)}_setHash(){history.pushState("","",this.hash)}_removeHash(){history.pushState("","",window.location.href.split("#")[0])}_focusCatch(e){const t=this.targetOpen.element.querySelectorAll(this._focusEl),s=Array.prototype.slice.call(t),n=s.indexOf(document.activeElement);e.shiftKey&&0===n&&(s[s.length-1].focus(),e.preventDefault()),e.shiftKey||n!==s.length-1||(s[0].focus(),e.preventDefault())}_focusTrap(){const e=this.previousOpen.element.querySelectorAll(this._focusEl);!this.isOpen&&this.lastFocusEl?this.lastFocusEl.focus():e[0].focus()}popupLogging(e){this.options.logging&&l(`[Попапос]: ${e}`)}}({});let c=(e,t=!1,s=500,n=0)=>{const o=document.querySelector(e);if(o){let i="",c=0;if(t){i="header.header";const e=document.querySelector(i);e.classList.contains("_header-scroll")?c=e.offsetHeight:(e.style.cssText="transition-duration: 0s;",e.classList.add("_header-scroll"),c=e.offsetHeight,e.classList.remove("_header-scroll"),setTimeout((()=>{e.style.cssText=""}),0))}let r={speedAsDuration:!0,speed:s,header:i,offset:n,easing:"easeOutQuad"};if(document.documentElement.classList.contains("menu-open")&&a(),"undefined"!=typeof SmoothScroll)(new SmoothScroll).animateScroll(o,"",r);else{let e=o.getBoundingClientRect().top+scrollY;e=c?e-c:e,e=n?e-n:e,window.scrollTo({top:e,behavior:"smooth"})}l(`[gotoBlock]: Юхуу...їдемо до ${e}`)}else l(`[gotoBlock]: Йой... Такого блоку немає на сторінці: ${e}`)};let r=!1;if(setTimeout((()=>{if(r){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),document.addEventListener("click",(e=>{const t=e.target.closest(".upload, .popup")||e.target.matches(".previews__edit, .previews__delete, .upload__submit, .header__burger");e.target.closest(".header__upload-btn")||e.target.closest(".upload__close")?document.documentElement.classList.toggle("upload-active"):t||document.documentElement.classList.remove("upload-active")})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&document.documentElement.classList.remove("upload-active")})),function(){const t=["image/jpeg","image/png","image/gif","image/bmp","image/tif","image/webp","image/heic","image/pdf","image/jpg","image/pdf","image/tiff"," image/heif"],s=document.querySelector(".upload__input"),n=document.querySelector(".upload"),o=document.querySelector(".previews"),i=document.querySelector(".upload__renew"),a=(document.querySelector(".upload__actions"),document.querySelector(".results")),l=document.querySelector(".results__links"),c=document.querySelector(".upload__label_main"),r=document.querySelector(".upload__form");let u=0;n.addEventListener("dragover",(e=>e.preventDefault())),n.addEventListener("drop",(e=>e.dataTransfer.files||e.dataTransfer.files.length?(e.preventDefault(),d(e.dataTransfer.files)):null)),s.addEventListener("change",(()=>{(s.files||s.files.length)&&(d(s.files),document.documentElement.classList.add("upload-active"))})),document.querySelector(".main").addEventListener("click",(()=>{s.value="",s.file=[],o.innerHTML="",a.classList.remove("_visible"),document.documentElement.classList.remove("preload"),c.classList.remove("_uploaded"),l.innerHTML="",s.click()}));const d=n=>{n=[...n];for(let a=0;a<n.length;a++){const l=n[a];if(t.includes(l.type))if(l.size>33554432)alert(l.name+"Имеет недопустимый размер изображения (необходимо менее 32Мб)");else{const t=new FileReader;t.addEventListener("load",(()=>{i.classList.add("_visible"),c.classList.add("_edit");const n=document.createElement("a");n.classList.add("previews__item"),n.setAttribute("data-id",u++),n.setAttribute("target","_blank");const a=document.createElement("img");a.src=t.result,a.classList.add("previews__image","_loading"),a.addEventListener("load",(()=>a.classList.remove("_loading"))),n.appendChild(a);const r=document.createElement("button");r.classList.add("previews__delete","_icon-xmark"),r.setAttribute("title","Удалить"),n.appendChild(r),r.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest(".previews__item");t&&(o.removeChild(t),document.querySelector(".previews__item")||(s.value="",document.documentElement.classList.remove("preload"),i.classList.remove("_visible"),c.classList.remove("_edit")),document.querySelectorAll(".page__form").forEach((e=>e.dataset.id===t.dataset.id&&document.querySelector(".page__settings-forms").removeChild(e))))}));const d=document.createElement("button");d.classList.add("previews__edit","_icon-edit"),d.setAttribute("title","Изменить");const p=u-1;d.setAttribute("data-popup","#popup-"+p),n.appendChild(d),o.appendChild(n),d.addEventListener("click",(s=>{const n=s.target.closest(".previews__item");if(n){if(!n.querySelector(".settings")){const s=document.createElement("div");s.classList.add("page__form"),s.setAttribute("data-id",p),document.querySelector(".page__settings-forms").appendChild(s);const n=new Image;n.src=t.result,e.popup.open(d.dataset.popup),s.innerHTML=`\n                  <div id="popup-${p}" aria-hidden="true" class="popup">\n                  <div class="popup__wrapper">\n                    <div class="popup__content">\n                      <button data-close type="button" class="popup__close _icon-xmark" title="Закрыть"></button>\n                      <div class="popup__text settings">\n                        <h3 class="settings__title">Редактировать</h3>\n                        <img class="settings__image" src="${t.result}">\n                        <form class="settings__form">\n                          <label class="settings__label">\n                            Заголовок <span>(необязательно)</span>\n                            <input class="settings__input" value="${l.name.substring(0,l.name.lastIndexOf("."))}" type="text" name="name[${p}]">\n                          </label>\n                          <label class="settings__label settings__label_size">\n                            <p>Изменить размер изображения</p>\n                            <input class="settings__input" value="${n.naturalWidth}" type="number" min="10" max="2000" name="width[${p}]" title="Ширина" autocomplete="off">\n                            <input class="settings__input" value="${n.naturalHeight}" type="number" min="10" max="2000" name="height[${p}]" title="Высота" autocomplete="off">\n                          </label>\n                          <label class="settings__label">\n                            Описание <span>(необязательно)</span>\n                            <textarea class="settings__input" rows="5" type="text" name="description[${p}]" placeholder="краткое описание изображения"></textarea>\n                          </label>\n                          <button class="settings__submit btn" type="submit">Сохранить</button> \n                        </form>\n                      </div>\n                    </div>\n                  </div>\n                  </div>\n                `,s.querySelector(".settings__submit").addEventListener("click",(t=>{t.preventDefault();const s=document.querySelector(`input[name="name[${p}]"]`).value,o=document.querySelector(`textarea[name="description[${p}]"]`).value,i=document.querySelector(`input[name="width[${p}]"]`).value,a=document.querySelector(`input[name="height[${p}]"]`).value,c=document.createElement("canvas");c.width=i,c.height=a;c.getContext("2d").drawImage(n,0,0,i,a);const r=c.toDataURL();l.settings={newBase64:r,newName:s,description:o},e.popup.close(d.dataset.popup)}))}}}))})),t.readAsDataURL(l),l&&document.documentElement.classList.add("preload")}else alert(l.name+"Имеет недопустимый формат изображения"+t.toString())}};async function p(e){try{const t=new FormData;let s="";if(e.settings){const n=e.settings.newBase64;s=e.settings.newName;const o="data:",i=n.indexOf(",",n.indexOf(o)),a=n.substring(i+1);t.append("image",a)}else t.append("image",e);const n=`https://api.imgbb.com/1/upload?expiration=${m}&name=${s}&key=${"5adf6814441a623f5157d8a3fe1490eb"}`,o={method:"POST",body:t},i=await fetch(n,o);if(400===i.status)return void alert("Ошибка при получением данных от сервера. Вероятно, закончится ключ бесплатного использования. Посмотрите консоль");return await i.json()}catch(e){alert("Ошибка: "+e)}}r.addEventListener("submit",(e=>{e.preventDefault(),async function(){document.documentElement.classList.add("_uploading");const e=[];for(let t=0;t<s.files.length;t++)e.push(p(s.files[t]));const t=await Promise.all(e),n=t.map((e=>e.data.url_viewer)),o=t.map((e=>e.data.url));!async function(e,t){a.classList.add("_visible"),c.classList.remove("_edit"),c.classList.add("_uploaded"),document.documentElement.classList.remove("preload"),document.documentElement.classList.remove("_uploading");const s=document.querySelectorAll(".previews__item");for(let t=0;t<s.length;t++)s[t].setAttribute("href",e[t]);l.innerHTML=e.map((e=>`<li><a href="${e}" target="_blank">${e}</a></li>`)).join(""),document.querySelector(".results__select").addEventListener("change",(()=>{const s=a.querySelectorAll("option");s[0].selected?l.innerHTML=e.map((e=>`<li><a href="${e}" target="_blank">${e}</a></li>`)).join(""):s[1].selected?l.innerHTML=t.map((e=>`<li><a href="${e}" target="_blank">${e}</a></li>`)).join(""):s[2].selected?l.innerHTML=t.map((e=>`<li>&ltimg src="${e}" alt="01" border="0"></li>`)).join(""):s[3].selected?l.innerHTML=t.map((e=>`<li>&lta href="${e}">&ltimg src="${e}" alt="01" border="0"></a></li>`)).join(""):s[4].selected?l.innerHTML=e.map((e=>`<li>&lta href="https://imgbb.com/">&ltimg src="${e}" alt="01" border="0"></a></li>`)).join(""):s[5].selected?l.innerHTML=e.map((e=>`<li>&lta href="${e}">&ltimg src="${e}" alt="01" border="0"></a></li>`)).join(""):s[6].selected?l.innerHTML=t.map((e=>`<li>[img]${e}[/img]</li>`)).join(""):s[7].selected?l.innerHTML=e.map((e=>`<li>[url=${e}][img]${e}[/img][/url]</li>`)).join(""):s[8].selected?l.innerHTML=e.map((e=>`<li>[url=https://imgbb.com/][img]${e}[/img][/url]</li>`)).join(""):s[9].selected&&(l.innerHTML=t.map((e=>`<li>[url=${e}][img]${e}[/img][/url]</li>`)).join(""))}))}(n,o)}(),document.querySelectorAll(".previews__delete").forEach((e=>e.remove())),document.querySelectorAll(".previews__edit").forEach((e=>e.remove()))})),i.addEventListener("click",(()=>{o.innerHTML="",s.value="",s.file=[],i.classList.toggle("_visible"),a.classList.remove("_visible"),c.classList.remove("_edit","_uploaded"),l.innerHTML="",document.documentElement.classList.remove("preload")}));let m=0;const h=document.querySelector(".upload__autodelete-time");h.addEventListener("change",(()=>{const e=h.querySelectorAll("option");e[0].selected?m=0:e[1].selected?m=300:e[2].selected?m=900:e[3].selected?m=1800:e[4].selected?m=3600:e[5].selected?m=10800:e[6].selected?m=21600:e[7].selected?m=43200:e[8].selected?m=86400:e[9].selected?m=259200:e[10].selected?m=604800:e[11].selected?m=1209600:e[12].selected?m=3628800:e[13].selected&&(m=7257600)}))}(),document.documentElement.classList.contains("upload-active")){const u=0,d=0;let p=100;function m(e){u=e.touches[0].clientY}function h(e){d=e.changedTouches[0].clientY;let t=d-u;d<u&&Math.abs(t)>p&&document.documentElement.classList.remove("upload-active")}window.addEventListener("touchstart",m,{passive:!0}),window.addEventListener("touchend",h,{passive:!0})}window.FLS=!1,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){setTimeout((function(){document.documentElement.classList.add("loaded")}),0)})),document.querySelector(".header__burger")&&document.addEventListener("click",(function(e){n&&e.target.closest(".header__burger")?document.documentElement.classList.toggle("menu-open"):document.documentElement.classList.remove("menu-open")})),function(){if(document.querySelectorAll("[data-fullscreen]").length&&t.any()){function e(){let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}window.addEventListener("resize",e),e()}}(),function(){function t(t){if("click"===t.type){const s=t.target;if(s.closest("[data-goto]")){const n=s.closest("[data-goto]"),o=n.dataset.goto?n.dataset.goto:"",i=!!n.hasAttribute("data-goto-header"),l=n.dataset.gotoSpeed?n.dataset.gotoSpeed:500,r=n.dataset.gotoTop?parseInt(n.dataset.gotoTop):0;if(e.fullpage){const t=document.querySelector(`${o}`).closest("[data-fp-section]"),s=t?+t.dataset.fpId:null;null!==s&&(e.fullpage.switchingSection(s),document.documentElement.classList.contains("menu-open")&&a())}else c(o,i,l,r);t.preventDefault()}}else if("watcherCallback"===t.type&&t.detail){const e=t.detail.entry,s=e.target;if("navigator"===s.dataset.watch){document.querySelector("[data-goto]._navigator-active");let t;if(s.id&&document.querySelector(`[data-goto="#${s.id}"]`))t=document.querySelector(`[data-goto="#${s.id}"]`);else if(s.classList.length)for(let e=0;e<s.classList.length;e++){const n=s.classList[e];if(document.querySelector(`[data-goto=".${n}"]`)){t=document.querySelector(`[data-goto=".${n}"]`);break}}e.isIntersecting?t&&t.classList.add("_navigator-active"):t&&t.classList.remove("_navigator-active")}}}if(document.addEventListener("click",t),document.addEventListener("watcherCallback",t),s()){let e;document.querySelector(`#${s()}`)?e=`#${s()}`:document.querySelector(`.${s()}`)&&(e=`.${s()}`),e&&c(e,!0,500,20)}}()})();